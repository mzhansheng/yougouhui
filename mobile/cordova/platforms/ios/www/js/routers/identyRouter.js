define(["jquery","backbone","models/CommonViewModel","views/ViewFactory"],function(d,f,e,c){var b=[];var a=f.Router.extend({initialize:function(){},identy:function(h){var k=null;for(var g=0;g<b.length;g++){var j=b[g];if(j.code==h){k=j.view;break}}if(!k){d.mobile.changePage("#"+h,{reverse:false,changeHash:false});return}d.mobile.loading("show");k.collection.fetch({success:function(m,i,l){m.trigger("added")},error:function(){d.mobile.loading("hide");alert("加载数据失败.")}}).done(function(){d.mobile.loading("hide");d.mobile.changePage("#"+h,{reverse:false,changeHash:false})})},addViews:function(h,g){d.each(h,function(l,o){var n=false;var p=o.code;if(g){for(var m=0;m<g.length;m++){if(p==g[m]){n=true;break}}}if(!n){var k=new e({el_data:"#"+p,collection_data:{models:[],options:{title:o.name}}});var j=c.getView(p,k);if(j){b.push({code:p,view:j})}}})}});return a});