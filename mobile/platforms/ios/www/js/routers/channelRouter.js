define(["jquery","collections/ActivityCollection","views/ChannelView"],function(d,c,b){var a=[];return{init:function(e){d.each(e,function(g,h){var i=h.code;var f=new b({el:"#"+i,collection:new c([],{channelCode:i,channelId:h.uuid,channelName:h.name,parentId:h.parent_id})});a.push({id:i,view:f})})},route:function(g){var e=null;for(var f=0;f<a.length;f++){var h=a[f];if(h.id==g){e=h.view;break}}if(!e){return}d.mobile.loading("show");e.collection.fetch({success:function(k,i,j){k.trigger("added")},error:function(){d.mobile.loading("hide");alert("加载活动数据失败.")}}).done(function(){d.mobile.loading("hide")})}}});