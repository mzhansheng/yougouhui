define(["jquery","backbone","collections/ActivityCollection","views/ChannelView"],function(e,f,d,a){var c=new Array();var b=f.Router.extend({initialize:function(){},routes:{"subChannel?:id":"channel"},channel:function(k){var j=null;for(var g=0;g<c.length;g++){var h=c[g];if(h.id==k){j=h.view;break}}if(!j){return}e.mobile.loading("show");j.collection.fetch({success:function(m,i,l){m.trigger("added")},error:function(){e.mobile.loading("hide");alert("加载活动数据失败.")}}).done(function(){e.mobile.loading("hide");e.mobile.changePage("#subChannel",{reverse:false,changeHash:false})})},addViews:function(g){e.each(g,function(j,i){var k=i.uuid;var h=new a({el:"#subChannel",collection:new d([],{channelCode:i.code,channelId:k,channelName:i.name,parentId:i.parent_id})});c.push({id:k,view:h})})}});return b});