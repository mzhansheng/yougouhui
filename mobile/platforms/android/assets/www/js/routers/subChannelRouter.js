define(["jquery","backbone","collections/ActivityCollection","views/ChannelView"],function(j,i,k,h){var l=[];var g=i.Router.extend({initialize:function(){},routes:{"subChannel?:id":"channel"},channel:function(a){var b=null;for(var d=0;d<l.length;d++){var c=l[d];if(c.id==a){b=c.view;break}}if(!b){return}j.mobile.loading("show");b.collection.fetch({success:function(e,n,f){e.trigger("added")},error:function(){j.mobile.loading("hide");alert("加载活动数据失败.")}}).done(function(){j.mobile.loading("hide");j.mobile.changePage("#subChannel",{reverse:false,changeHash:false})})},addViews:function(a){j.each(a,function(c,d){var b=d.uuid;var e=new h({el:"#subChannel",collection:new k([],{channelCode:d.code,channelId:b,channelName:d.name,parentId:d.parent_id})});l.push({id:b,view:e})})}});return g});