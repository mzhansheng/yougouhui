define(["jquery","backbone","routers/dispatcher"],function(c,d,b){var a=d.View.extend({initialize:function(){this.collection.on("added",this.render,this)},render:function(){this.template=_.template(c("script#moduleItems").html(),{collection:this.collection});this.$el.find("ul").html(this.template);_.each(this.collection.toJSON(),function(g,h){if(g.url){c.mobile.loadPage(g.url,{prefetch:true})}});var f=null;var e=null;if(this.collection.type=="discover"){e=b.getRouter("DiscoverRouter");f=["radar"]}else{if(this.collection.type=="me"){e=b.getRouter("UserProfileRouter");f=["settings","my_shop"]}}if(e){e.addViews(this.collection.toJSON(),f)}c(".module-li").on("click",function(){var h=c(this).jqmData("code");var g=c(this).jqmData("title");if(e){e.navigate(e.routerPrefix+"?"+h,{trigger:true,replace:true})}});return this}});return a});