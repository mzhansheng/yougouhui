define(["jquery","backbone","routers/dispatcher"],function(h,g,e){var f=g.View.extend({initialize:function(){this.collection.on("added",this.render,this)},render:function(){this.template=_.template(h("script#moduleItems").html(),{collection:this.collection});this.$el.find("ul").html(this.template);_.each(this.collection.toJSON(),function(d,c){if(d.url){h.mobile.loadPage(d.url,{prefetch:true})}});var a=null;var b=null;if(this.collection.type=="discover"){b=e.getRouter("DiscoverRouter");a=["radar"]}else{if(this.collection.type=="me"){b=e.getRouter("UserProfileRouter");a=["settings","my_shop"]}}if(b){b.addViews(this.collection.toJSON(),a)}h(".module-li").on("click",function(){var c=h(this).jqmData("code");var d=h(this).jqmData("title");if(b){b.navigate(b.routerPrefix+"?"+c,{trigger:true,replace:true})}});return this}});return f});